{
  "version": 3,
  "sources": ["../Private/Assets/Main.js"],
  "sourcesContent": ["const NAMESPACE = 'betterembed';\nconst SWITCH_CLASS = `js-${NAMESPACE}-switch`;\nconst CLOSE_CLASS = `js-${NAMESPACE}-close`;\nconst LOAD_REMOTE_CLASS = `js-${NAMESPACE}-load-remote`;\nconst REMOTE_VISIBLE_CLASS = `is-${NAMESPACE}-remote-visible`;\nconst SHOW_MESSAGE_CLASS = `is-${NAMESPACE}-dialog-visible`;\nconst CONFIRMED_MESSAGE_CLASS = `is-${NAMESPACE}-confirmed`;\n\nconst getContainer = (element) => element.closest(`.js-${NAMESPACE}`);\nconst getEmbedElement = (container) => container.querySelector(`.js-${NAMESPACE}-embed`);\n\ndocument.addEventListener('click', (event) => {\n    const TARGET = event.target;\n\n    if (TARGET.classList.contains(SWITCH_CLASS)) {\n        const CONTAINER = getContainer(TARGET);\n        const CLASS_LIST = CONTAINER.classList;\n        const ALREADY_CONFIRMED = CLASS_LIST.contains(CONFIRMED_MESSAGE_CLASS);\n\n        // toggle remote if already confirmed, otherwhise toggle message\n        CLASS_LIST.toggle(ALREADY_CONFIRMED ? REMOTE_VISIBLE_CLASS : SHOW_MESSAGE_CLASS);\n    }\n\n    if (TARGET.classList.contains(CLOSE_CLASS)) {\n        const CONTAINER = getContainer(TARGET);\n\n        // Hide Message\n        CONTAINER.classList.remove(SHOW_MESSAGE_CLASS);\n    }\n\n    if (TARGET.classList.contains(LOAD_REMOTE_CLASS)) {\n        const CONTAINER = getContainer(TARGET);\n        const CLASS_LIST = CONTAINER.classList;\n        const EMBED_ELEMENT = getEmbedElement(CONTAINER);\n\n        if (!EMBED_ELEMENT.innerHTML) {\n            // This is the first-time click\n            EMBED_ELEMENT.innerHTML = JSON.parse(CONTAINER.dataset.embedHtml);\n\n            // Run trough every script and active it\n            Array.from(EMBED_ELEMENT.querySelectorAll('script')).forEach((scriptTag) => {\n                if (scriptTag.src) {\n                    const TAG = document.createElement('script');\n                    TAG.src = scriptTag.src;\n                    document.head.appendChild(TAG);\n                } else {\n                    // The script is an inline JS, so we have to use eval\n                    // jshint -W061\n                    window.eval(scriptTag.innerHTML);\n                    // jshint +W061\n                }\n            });\n        }\n        CLASS_LIST.add(REMOTE_VISIBLE_CLASS);\n        CLASS_LIST.add(CONFIRMED_MESSAGE_CLASS);\n        CLASS_LIST.remove(SHOW_MESSAGE_CLASS);\n    }\n});\n"],
  "mappings": "MAAA,IAAMA,EAAY,cACZC,EAAe,MAAMD,CAAS,UAC9BE,EAAc,MAAMF,CAAS,SAC7BG,EAAoB,MAAMH,CAAS,eACnCI,EAAuB,MAAMJ,CAAS,kBACtCK,EAAqB,MAAML,CAAS,kBACpCM,EAA0B,MAAMN,CAAS,aAEzCO,EAAgBC,GAAYA,EAAQ,QAAQ,OAAOR,CAAS,EAAE,EAC9DS,EAAmBC,GAAcA,EAAU,cAAc,OAAOV,CAAS,QAAQ,EAEvF,SAAS,iBAAiB,QAAUW,GAAU,CAC1C,IAAMC,EAASD,EAAM,OAErB,GAAIC,EAAO,UAAU,SAASX,CAAY,EAAG,CAEzC,IAAMY,EADYN,EAAaK,CAAM,EACR,UACvBE,EAAoBD,EAAW,SAASP,CAAuB,EAGrEO,EAAW,OAAOC,EAAoBV,EAAuBC,CAAkB,CACnF,CASA,GAPIO,EAAO,UAAU,SAASV,CAAW,GACnBK,EAAaK,CAAM,EAG3B,UAAU,OAAOP,CAAkB,EAG7CO,EAAO,UAAU,SAAST,CAAiB,EAAG,CAC9C,IAAMY,EAAYR,EAAaK,CAAM,EAC/BC,EAAaE,EAAU,UACvBC,EAAgBP,EAAgBM,CAAS,EAE1CC,EAAc,YAEfA,EAAc,UAAY,KAAK,MAAMD,EAAU,QAAQ,SAAS,EAGhE,MAAM,KAAKC,EAAc,iBAAiB,QAAQ,CAAC,EAAE,QAASC,GAAc,CACxE,GAAIA,EAAU,IAAK,CACf,IAAMC,EAAM,SAAS,cAAc,QAAQ,EAC3CA,EAAI,IAAMD,EAAU,IACpB,SAAS,KAAK,YAAYC,CAAG,CACjC,MAGI,OAAO,KAAKD,EAAU,SAAS,CAGvC,CAAC,GAELJ,EAAW,IAAIT,CAAoB,EACnCS,EAAW,IAAIP,CAAuB,EACtCO,EAAW,OAAOR,CAAkB,CACxC,CACJ,CAAC",
  "names": ["NAMESPACE", "SWITCH_CLASS", "CLOSE_CLASS", "LOAD_REMOTE_CLASS", "REMOTE_VISIBLE_CLASS", "SHOW_MESSAGE_CLASS", "CONFIRMED_MESSAGE_CLASS", "getContainer", "element", "getEmbedElement", "container", "event", "TARGET", "CLASS_LIST", "ALREADY_CONFIRMED", "CONTAINER", "EMBED_ELEMENT", "scriptTag", "TAG"]
}
